---
- hosts: localhost
  become: true
  tasks:
  - name: add google chrome apt key
    apt_key:
      url: https://dl-ssl.google.com/linux/linux_signing_key.pub
      state: present
  - name: add google chrome repo
    apt_repository:
      repo: deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main
      state: present
      filename: google-chrome
  - name: add vscode apt key
    apt_key:
      url: https://packages.microsoft.com/keys/microsoft.asc
      state: present
  - name: add vscode repo
    apt_repository:
      repo: deb [arch=amd64] https://packages.microsoft.com/repos/vscode stable main
      state: present
      filename: vscode
  - name: update cache and upgrade existing packages
    apt: upgrade=dist update_cache=yes cache_valid_time=3600 force=yes autoremove=yes
  - name: install packages
    apt:
      name:
        - zsh
        - vim
        - emacs
        - keychain
        - curl
        - htop
        - docker.io
        - docker-compose
        - openssh-server
        - thunderbird
        - youtube-dl
        - python3-pip
        - python3-venv
        - php-cli
        - google-chrome-stable
        - code
  - name: set normal user shell to zsh
    user:
      name: karl
      shell: /usr/bin/zsh
